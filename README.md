# ai-wechat-personal
**在微信个人订阅号中通过调用大模型接口实现AI聊天机器人的功能**

微信个人订阅号有很多限制，最大的问题是无法主动给用户推送消息，只能在用户发起请求的15秒内回复用户。微信官方会在15秒内发3次请求，为了能在个人订阅号中实现用调用第三方接口返回消息，回复消息必须在15秒的时间内生成。

![微信图片_20230309160529](https://user-images.githubusercontent.com/5563148/223959556-b9970db1-66fb-46fa-b3af-54d51c74cd5b.jpg)

- **实现原理：**

1. 腾讯服务器推送用户消息过来时，调用第三方API接口，并将用户的问题和返回的结果存到日志文件中。
2. 在5秒内很可能收不到接口返回的消息。没关系，直接让腾讯服务器发过来的请求响应超时。
3. 等腾讯第二次或第三次查询的时候，第一次请求调用的结果也返回并写到文件中了，直接从文件中获取结果返回给用户。

基于以上的原理，建议只做一次性对话，不联系上下文。并且在极端情况下还是可能会出现超时的情况，一般重新问一次就好了。

所有用户的消息都是有日志的。所以，把它发给朋友，看看他们关心的问题，也是很有意思的……


我上面写的流程比较简单，我看在AI交流群里看到已经有网友把从申请订阅号到跑通代码的整个流程整理成图文教程了，在这里贴一下供各位小白网友参考。

https://www.qybk.cc/archives/84/


- **功能体验**

![qrcode_for_gh_7d9f69d300ab_258](https://user-images.githubusercontent.com/5563148/223959051-3cbb2c9b-6e37-436a-95c2-7c998379d06c.jpg)

欢迎关注我其他关于DeepSeek的项目！

https://github.com/dirk1983/deepseek
